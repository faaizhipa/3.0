"use strict";!function(){var s,l=window,c=l.location,d=document,e="undefined"!=typeof chrome&&chrome||{},m=e.runtime.getURL("PATH/").replace("/PATH/",""),u=m.startsWith("safari-web-extension://"),f=!u&&m.startsWith("moz-extension://"),a="undefined"!=typeof KeyboardEvent&&"key"in KeyboardEvent.prototype&&!/MSIE |Edge\/|Trident.*rv:11\./.test(navigator.userAgent)&&void 0===String.quote,i=a?"Enter":13;function p(){var e=/^Mac|^iP/.test(navigator.platform);return s=e?"metaKey":"ctrlKey"}function h(e,t,n){l.parent.postMessage({bm_method:e,bm_request:n,bm_value:t},m)}function v(e){var t="A";if("closest"in Element.prototype)return e.closest(t);for(var n=e;n;){if(n.tagName===t)return n;n=n.parentNode}return null}function t(n){d.addEventListener("click",n,!0),d.addEventListener("auxclick",function(e){1===e.button&&n(e)},!0),d.addEventListener("keyup",function(e){var t;t=e,(a&&t.key||t.which||t.keyCode)===i&&n(e)},!0)}function g(e){/^https:\/\/[a-z]+\.app\.goo\.gl$/.test(e.origin)&&(e.href=(e=e.search,(e=new URLSearchParams(e)).get("link")||e.get("afl")))}function r(e,t){var n,a,i,r=v(e.target),o=r&&r.href;o&&(i=r.origin===c.origin,n=e.shiftKey,(a=1===(a=e).button||a[s||p()])||n||"_blank"===r.target||!i?(h("bmCstOpenUrl",[o,n,a]),e.stopPropagation(),e.preventDefault()):(g(r),t&&-1===(i=r.search).indexOf("bm_cst=")&&(r.search=t+i.replace("?","&"))))}var n,o,b,y='[role="listitem"][id^="th_"]',_='[role="listitem"][id^="th_"] > div[role="button"]',E=!1;function S(e){e=(e.split("mail/mu/mp/")[1]||"").split("/")[0];e&&h("mailSessionId",e)}function O(e,t){e=d.querySelectorAll(e);e[t=-1===t?e.length-1:t].click()}function k(e){for(var t=e+"/lb_data",n="sp/chrome/"+t,a=Object.keys(l.localStorage),i=0;i<a.length;i++){var r=a[i];if(r.endsWith(t)){n=r;break}}var o,e=l.localStorage[n];e&&(e=JSON.parse(e),o=function(e){for(var t={colorKey:"bgColor",idKey:"Y",mainKey:"wa",nameKey:"name",unreadKey:"T"},n={},a=0;a<e.length;a++){for(var i=e[a],r=Object.keys(i),o=void 0,s=void 0,l=0;l<r.length;l++){var c=r[l],d=i[c],m=d&&"object"==typeof d&&Object.keys(d);if(m&&4<m.length){t.mainKey=c;for(var u=d.name,f=0;f<m.length;f++){var p=m[f];"name"!==p&&"string"==typeof p&&d[p]===u&&(t.idKey=p)}}else"number"==typeof d&&(!o||d<=s)&&(o=c,s=d)}n[o]?n[o]+=1:n[o]=1}for(var h=Object.keys(n),v="T",g=0;g<h.length;g++){var b=h[g];0<n[b]&&(v=b)}return t.unreadKey=v,t}(e),h("mailCachedLabels",e.map(function(e){var t={},e=(t.unreadCount=e[o.unreadKey],e[o.mainKey]),e=(t.name=e[o.nameKey],t.id=e[o.idKey],e[o.colorKey]);return e&&(t.color={backgroundColor:e}),t})))}function C(){var e=(d.head.textContent.split('USER_EMAIL = "')[1]||"").split('"')[0]||(d.cookie.split("GAUSR=")[1]||"").split(";")||(Object.keys(l.localStorage).join("").split("pref/")[1]||"").split("/")[0];if(e){var t,n=e;if(l.openDatabase){try{t=l.openDatabase(n,"","",0)}catch(e){return void k(n)}t.transaction(function(e){e.executeSql("SELECT labelId,unreadCount,metadata FROM cached_labels",[],function(e,t){for(var n=[],a=0;a<t.rows.length;a++){var i=t.rows[a],r={id:i.labelId,unreadCount:i.unreadCount},i=i.metadata.startsWith("[")&&JSON.parse(i.metadata),o=i[2],i=i[4];"string"==typeof o&&(r.name=o),"string"==typeof i&&(r.color={backgroundColor:i}),n.push(r)}h("mailCachedLabels",n)},function(){k(n)})})}else k(n)}}function L(e,t){var n,a,t=t.id.replace("th_","");t&&(n=e.shiftKey,(a=1===e.button||e[s||p()])||n)&&(h("mailOpenThreadInNew",[t,n,a]),e.stopPropagation(),e.preventDefault())}function A(){var n=c.search;t(function(e){var t=(t=(t=e).target).matches(y)?t:t.matches(_)?t.parentNode:null;return t?L(e,t):r(e,n)})}function x(){var e=c.href;S(e),h("mailPageUrl",e),C(),setTimeout(C,1e3),setTimeout(C,5e3),A()}!function e(){var t;c.hash.startsWith("#tl")&&(t=(t=d.querySelector('div[style*="translate3d"] > div:first-child'))&&"none"!==t.style.display,E!==t)&&h("mailSelectionState",E=t),setTimeout(e,100)}(),e=function(e,t,n){return"https://mail.google.com"===e&&-1!==c.pathname.indexOf("/mu/")&&-1!==n.indexOf("mui=bm_mail")},n=function(){e=d,o=Date.now(),i=c,e=e.cookie,t=(i.search.split("mui=")[1]||"").split("&")[0],n=!1,-1===(a=e).indexOf("GMAIL_AT=")&&(a+="; GMAIL_AT="+t,n=!0),-1===e.indexOf("WML=")&&(t=(t+"__").split("__")[1].split("_")[0]||"0",i=(i.pathname.split("/mp/")[1]||"").split("/")[0],a+="; WML="+o+"#"+l.USER_EMAIL+":"+i+":"+t,n=!0),e.startsWith("SID=")||-1!==e.indexOf(" SID=")||(a+="; SID=1",n=!0),n&&(d.cookie=a),function(e){var t=d.createElement("script");if(u){var n=btoa(e);if(d.querySelector('script[data-bm-cs="'+n+'"]'))return;t.dataset.bmCs=n}t.textContent=e,(n=d.documentElement).insertBefore(t,n.firstChild)}('"use strict";!function(){var n=window,t=n.location,e=document,o="WML=",r="SID=",i="cookie",s=e,a=Date.now(),c=t,p=s[i],l=(c.search.split("mui=")[1]||"").split("&")[0];n.top!==n.self&&("object"!=typeof(t=t.ancestorOrigins)||1===t.length&&-1!==t[0].indexOf("extension://"))&&Object.defineProperty(s,i,{get:function(){var t,e,i=p;return-1===p.indexOf("GMAIL_AT=")&&(i+="; GMAIL_AT="+s.documentElement.dataset.mailAt),-1===p.indexOf(o)&&(t=(l+"__").split("__")[2].split("_")[0]||"0",e=(c.pathname.split("/mp/")[1]||"").split("/")[0],i+="; "+o+a+"#"+n.USER_EMAIL+":"+e+":"+t),p.startsWith(r)||-1!==p.indexOf(" "+r)||(i+="; SID=1"),i}}),(i=e.currentScript)&&i.remove()}();'),d.documentElement.dataset.bmCid="mail";var e,t,n,a,i,r,o=d.documentElement.getAttribute("manifest");o&&S(o),-1!==c.search.indexOf("__theme_dark__")&&(d.documentElement.dataset.bmUdm="1"),-1!==c.search.indexOf("bm_mail_bigtop")&&(d.documentElement.dataset.bmCsMailHideStars="1"),i=x,"complete"===d.readyState||"loaded"===d.readyState||"interactive"===d.readyState?i():d.addEventListener("DOMContentLoaded",i),r=function(e,t){var n,a,i;"mailClickEl"===e?(n=t[0],i=t[1]||0,(a=t[2])?(O(n,a),setTimeout(function(){O(n,i)})):O(n,i)):"mailAtToken"===e&&(d.documentElement.dataset.mailAt=t)},l.addEventListener("message",function(e){var t;if(u){if(!e.origin.toLowerCase().startsWith("safari-web-extension://"))return}else if(!(e.origin===m))return;(e.isTrusted||f)&&e.source===l.parent&&(t=(e=e.data||{}).bm_method)&&r(t,e.bm_value,e.bm_request)}),l.addEventListener("hashchange",function(){h("mailHashChange",c.hash.replace("#",""))})},function(e){var t,n;if(l.top!==l.self&&!(d.documentElement instanceof SVGSVGElement))return"object"!=typeof(t=c.ancestorOrigins)?1:(n=u?m.toLowerCase():m,1===t.length?t[0]===n:e&&2===t.length&&t[1]===n&&!t[0].endsWith(".google.com"))}(o)&&(b=(b=(o=c.search).match(/[&?]bm_cid=([\da-z-]{2,25})(?:&|$)/))&&b[1],e(origin,b,o))&&(b&&(d.documentElement.dataset.bmCid=b),n())}();