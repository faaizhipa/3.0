"use strict";cjce.registerTemplate("bm-p-messages",function(e,c){var i="https://messages.google.com",t=i+"/web/u/"+c.account.authuser+"/",a=cjBasics.generateUniqueId(),n=c.darkMode?"1":"0",o={bm_iid:a,bm_cid:"messages",hl:cjBasics.lang.getCurrent(),bm_cst:"1",bm_udm:c.darkMode?"1":"0",dark_theme:n,dl_dark_theme:n},s="authentication",l=!1,d={conversations:{iconName:"__mdi_todo:message",label:cjBasics.lang.i18n("cj_i18n_01487","Conversations"),newTabUrl:"conversations"},archived:{iconName:"__mdi_todo:archive",label:cjBasics.lang.i18n("cj_i18n_01740","Archived"),newTabUrl:"conversations"},calls:{iconName:"__mdi_todo:call",label:cjBasics.lang.i18n("cj_i18n_01170","Calls"),newTabUrl:"calls"},voicemail:{iconName:"__mdi_todo:voicemail",label:cjBasics.lang.i18n("cj_i18n_01129","Voicemail"),newTabUrl:"voicemail"},settings:{iconName:"__mdi_todo:settings",label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),newTabUrl:"settings"},relatedHeader:{color:!0,header:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},chat:{iconName:"__mdi_todo:chat_bubble_outline",label:cjBasics.lang.i18n("cj_i18n_06694","Google Chat"),shortcutId:"559",external:!c.servicesDatabase.chat},meet:{iconName:"__mdi_todo:meet",label:cjBasics.lang.i18n("cj_i18n_00809","Meet"),shortcutId:"545",external:!c.servicesDatabase.meet}},r={authentication:cjBasics.lang.i18n("cj_i18n_01745","Connect phone"),newConversation:cjBasics.lang.i18n("cj_i18n_01741","New conversation"),newGroupConversation:cjBasics.lang.i18n("cj_i18n_01742","New group conversation"),conversation:cjBasics.lang.i18n("cj_i18n_01743","Conversation")},m=cjce.createElement("bm-ogb",{drawer:!0,withShadow:!0,serviceIcon:"messages",serviceLabel:cjBasics.lang.i18n("cj_i18n_01084","Messages"),pageLabel:cjBasics.lang.i18n("cj_i18n_07237","Authentication"),bmApis:c,onBack:function(){v.cjceSendFrameCommand({method:"bmCstNavigateBack"},i)},onNewTab:function(e,a,n){v.cjceGetCleanUrl(i).then(function(e){c.openTab(e||t,a,n)})}});function _(e){v.cjceSendFrameCommand({method:"bmCstClickDomElement",value:e},i)}function j(){_(".notifications-button")}e.appendChild(m);var g=cjce.createElement("ccbm-iconbutton",{label:cjBasics.lang.i18n("cj_i18n_06600","Unmute notifications"),iconName:"__mdi_todo:notifications_off",onClick:j}),b=(g.hidden=!0,m.cjceAppendChild(g),cjce.createElement("ccbm-iconbutton",{label:cjBasics.lang.i18n("cj_i18n_06599","Mute notifications"),iconName:"__mdi_todo:notifications",onClick:j})),h=(b.hidden=!0,m.cjceAppendChild(b),cjce.createElement("ccbm-iconbutton",{iconName:cjBasics.navigator.isSafari?"__mdi_todo:more_horiz":"__mdi_todo:more_vert",onClick:function(){_(".conversation-menu-icon")}}));function u(e){e="conversation"===e;b.hidden=!e||!l,g.hidden=!e||l,h.hidden=!e}h.hidden=!0,m.querySelector(".cjmd-appbar").appendChild(h),cjBasics.webRequest.handleIframeHeaders([i+"/*bm_iid="+a+"*"],{handleFirefoxInject:!0,handleSwCache:!0}),cjBasics.webRequest.catchAndStop(["https://accounts.google.com/AccountChooser*"+t+"postSignIn"],function(){v.src=cjBasics.urlParams.attach(t+"postSignIn",o)});var v=cjce.createElement("bm-iframe",{src:cjBasics.urlParams.attach(t+"authentication",o),onBmMessage:function(e,a){var n;"messagesUpdateView"===e?(u(s=a),n=(n=d[s])&&n.label||r[s],m.cjceSetPageLabel(n),p.cjceSelectedId=s):"messagesBackState"===e?m.cjceSetBackState(a):"messagesMutedState"===e?(l=a,b.hidden=!l,g.hidden=l):"messagesPageTitle"===e&&a&&(r.conversation=a,"conversation"===s)&&m.cjceSetPageLabel(a)}}),n=(e.appendChild(v),m.cjceDrawerEl),p=cjce.createElement("bm-navlist",{isSelector:!0,selectedId:s,items:d,onChange:function(e){"chat"===e||"meet"===e?(c.pageManager.navigate(e),p.cjceSelectedId=s):(v.cjceSendFrameCommand({method:"messagesActivateMenuItem",value:e},i),"archived"===e&&(p.cjceSelectedId=e="conversations"),u(s=e))},onNewTab:function(e,a){a=a.newTabUrl?t+a.newTabUrl:cjgFrontend.urls.getShortcutUrl(a.shortcutId,c.account);c.openTab(a)}});n.appendChild(p)});