"use strict";!function(){var o=window,i=o.location,a=document,r=("undefined"!=typeof chrome&&chrome||{}).runtime.getURL("PATH/").replace("/PATH/",""),d=r.startsWith("safari-web-extension://"),s=!d&&r.startsWith("moz-extension://");"undefined"!=typeof KeyboardEvent&&"key"in KeyboardEvent.prototype&&!/MSIE |Edge\/|Trident.*rv:11\./.test(navigator.userAgent)&&String.quote;function t(e,t,n){o.parent.postMessage({bm_method:e,bm_request:n,bm_value:t},r)}var e,n,c,m,u=-1!==i.search.indexOf("bm_udm=1"),g=-1!==i.search.indexOf("bm_udm=0");function l(){(u||g)&&(a.body.classList.toggle("dark-theme",u),a.body.classList.toggle("light-theme",g))}function f(){var e=a.querySelector('[data-test-id="mode-text"]');t("geminiAdvancedState",Boolean(e)),setTimeout(f,300)}e=function(e,t){return"gemini"===t&&("https://bard.google.com"===e||"https://gemini.google.com"===e)},n=function(){var e,n;e=l,"complete"===a.readyState||"loaded"===a.readyState||"interactive"===a.readyState?e():a.addEventListener("DOMContentLoaded",e),setTimeout(l,1e3),setTimeout(l,2e3),f(),n=function(e){"geminiToggleAdvanced"===e&&(a.querySelector("bard-logo").click(),setTimeout(function(){var e=a.querySelector('mat-action-list .bard-mode-list-button:not(:has(.check-icon.item-icon),[aria-disabled="true"])');e?e.click():t("geminiOpenBuyAdvanced")},300))},o.addEventListener("message",function(e){var t;if(d){if(!e.origin.toLowerCase().startsWith("safari-web-extension://"))return}else if(!(e.origin===r))return;(e.isTrusted||s)&&e.source===o.parent&&(t=(e=e.data||{}).bm_method)&&n(t,e.bm_value,e.bm_request)})},function(e){var t,n;if(o.top!==o.self&&!(a.documentElement instanceof SVGSVGElement))return"object"!=typeof(t=i.ancestorOrigins)?1:(n=d?r.toLowerCase():r,1===t.length?t[0]===n:e&&2===t.length&&t[1]===n&&!t[0].endsWith(".google.com"))}(c)&&(m=(m=(c=i.search).match(/[&?]bm_cid=([\da-z-]{2,25})(?:&|$)/))&&m[1],e(origin,m,c))&&(m&&(a.documentElement.dataset.bmCid=m),n())}();