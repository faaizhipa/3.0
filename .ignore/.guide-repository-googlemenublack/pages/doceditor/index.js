"use strict";cjce.registerTemplate("bm-p-doceditor",function(n,t){var o,l,s,r,e,a,i,d,_,m,c=cjgApis.docEditors,g=t.instanceParameters.productId||"doceditor",u=c[g]||{},c=u.mimeTypes||[],A=0===c.length?"(mimeType != 'application/vnd.google-apps.folder')":"(mimeType = '"+c.join("' or mimeType = '")+"')",D=u.entityName,j=u.iconName||"editors",F=u.emptyStateIcon,p="bm_pref__"+g+"__",c=u.serviceLabel,b=c||cjBasics.lang.i18n("cj_i18n_01289","Docs Suite"),h=u.portalLabel||b,c=u.pageLabel||c||cjBasics.lang.i18n("cj_i18n_02703","All files"),f=u.listview,v=!1,w=u.primaryColor,B=(w&&n.style.setProperty("--ccc-accent-color",w),u.noNewFile),N=u.docPath,y="all",T="lastOpenedByMe",I=!1,x="",C=!0,w=cjgApis.auth.requireToken(t.account,["https://www.googleapis.com/auth/drive"]).catch(function(e){return C=!1,e}),S="https://datastudio.google.com",U=S+"/u/"+t.account.authuser+"/",O={all:null,owned:"'me' in owners",shared:"sharedWithMe"},q={name:"name",lastModified:"modifiedTime desc",lastModifiedByMe:"modifiedByMeTime desc",lastOpenedByMe:"viewedByMeTime desc"},R="https://script.google.com"+t.wizPath+"/home/",E="script"===g;function M(){var a;C&&(s.cjceSetLoading(!0),a=["trashed = false",A],O[y]&&a.push(O[y]),I&&a.push("fullText contains '"+x+"'"),t.requirePage("doclist").then(function(){var e=cjce.createElement("cjg-doclist",{darkMode:t.darkMode,gAccount:t.account,noNewFile:B,noFabs:v,onLoadingChange:function(e){s.cjceSetLoading(e)},openInNew:t.openTab,listview:f,entityName:D,emptyStateIcon:F,searching:I,cachingId:I?null:"bm_cache_v36__"+g+"__doclist__"+y,shadow:"thinOnScroll",orderBy:I?null:q[T],q:a.join(" and ")});cjce.replaceChild(n,e,o),o=e}))}function L(e,a){return cjBasics.urlParams.attach(R+e,a||{})}function G(e){I!==e&&(I=e,l.hidden=e,M())}function P(e){var a=E?L("search",{q:e}):(a=t.account.authuser,(N?"https://docs.google.com/"+N+"/u/"+a+"/?q=":"sites"===g?"https://sites.google.com/u/"+a+"/?q=":"datastudio"===g?"https://datastudio.google.com/u/"+a+"/navigation/reporting/search/":void 0)+encodeURIComponent(e));t.openTab(a)}function H(e){u.noExternalSearch||C?G(x=e):P(e)}function V(){a=a||g,e=t.account.authuser;var e,a="mymaps"===a?cjBasics.urlParams.attach("https://www.google.com/maps/d/u/"+e+"/drive",{state:JSON.stringify({action:"create",userId:t.account.obfuscatedId})}):"datastudio"===a?"https://datastudio.google.com/u/"+e+"/reporting/":"sites"===a?"https://sites.google.com/u/"+e+"/create":"script"===a?"https://script.google.com/u/"+e+"/home/projects/create":N?"https://docs.google.com/"+N+"/u/"+e+"/create":void 0;t.openTab(a)}function z(){var e=J()+"?ftv=1";t.openTab(e)}function k(a){return cjce.createElement("ccbm-fab",{mini:!0,color:!0,label:a.label,iconName:a.iconName,onClick:function(){var e=U+a.urlPath;t.openTab(e)}})}function J(){return N?"https://docs.google.com/"+N+"/u/"+t.account.authuser+"/":cjgFrontend.urls.getShortcutUrl(u.mainShortcutId,t.account)}s=cjce.createElement("bm-ogb",{drawer:{color:!1},loading:!0,serviceIcon:j,serviceLabel:h,pageLabel:c,searchbox:{color:!0,onClear:function(){G(!1)},onSubmit:H,onMetaSubmit:u.noExternalSearch?null:P},bmApis:t,onNewTab:function(){var e;I?P(x):E?(e=L("all"===y||"shared"===y?y:"my"),t.openTab(e)):(e=J(),t.openTab(e))}}),n.appendChild(s),t.setOnPageDisplayHandler(s.cjceSearchboxEl.select),"datastudio"===g&&cjce.applyTemplate(s,"append-g-marketing-toggle",{bmApis:t,selectedId:"datastudio"}),h=s.cjceDrawerEl,i=cjce.createElement("bm-navlist",{selectedId:g,compact:"datastudio"===g,items:"sites"===g?{sites:{label:cjBasics.lang.i18n("cj_i18n_00112","Sites"),iconName:"__mdi_todo:atari_site",color:"#3e50b4",colorIcon:!0,shortcutId:"405"},settings:{label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),iconName:"__mdi_gm:settings",external:!0,shortcutId:"1781",divider:!0},relatedHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},drive:{label:cjBasics.lang.i18n("cj_i18n_00390","Drive"),iconName:"__mdi_todo:drive",shortcutId:"48"}}:E?{starred:{label:cjBasics.lang.i18n("cj_i18n_01295","Starred projects"),iconName:"__mdi_gm:star_outline",newTabUrl:L("starred"),external:!0},my:{label:cjBasics.lang.i18n("cj_i18n_01296","My projects"),iconName:"__mdi_gm:folder",newTabUrl:L("my"),external:!0},all:{label:cjBasics.lang.i18n("cj_i18n_01297","All projects"),iconName:"__mdi_gm:folder",newTabUrl:L("all"),external:!0},shared:{label:cjBasics.lang.i18n("cj_i18n_00002","Shared with me"),iconName:"__mdi_gm:people",newTabUrl:L("shared"),external:!0},trash:{label:cjBasics.lang.i18n("cj_i18n_00005","Bin"),iconName:"__mdi_gm:delete",newTabUrl:L("trash"),divider:!0,external:!0},executions:{label:cjBasics.lang.i18n("cj_i18n_01298","My executions"),iconName:"__mdi_gm:settings_ethernet",newTabUrl:L("executions"),external:!0},triggers:{label:cjBasics.lang.i18n("cj_i18n_01710","My triggers"),iconName:"__mdi_gm:alarm",newTabUrl:L("triggers"),divider:!0,external:!0},start:{label:cjBasics.lang.i18n("cj_i18n_01711","Getting started"),iconName:"__mdi_gm:play_circle_outline",newTabUrl:L("start"),external:!0},usersettings:{label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),iconName:"__mdi_gm:settings",newTabUrl:L("usersettings"),external:!0}}:"datastudio"===g?(i="https://support.google.com/datastudio/answer/",e="0"===t.account.authuser?"":"?authuser="+t.account.authuser,{datastudio:{color:"#1a73e8",iconName:"__mdi_todo:cj_gmp_data_studio_report",label:cjBasics.lang.i18n("cj_i18n_01299","Reports"),newTabUrl:U+"navigation/reporting"},sources:{iconName:"__mdi_todo:cj_gmp_data_studio_source",label:cjBasics.lang.i18n("cj_i18n_01300","Data sources"),newTabUrl:U+"navigation/datasources",external:!0},explorer:{iconName:"__mdi_todo:cj_gmp_data_studio_explore",label:cjBasics.lang.i18n("cj_i18n_01301","Explorer"),newTabUrl:U+"navigation/explorer",external:!0,divider:!0},productoverview:{iconName:"__mdi_todo:web_asset",label:cjBasics.lang.i18n("cj_i18n_01302","Product overview"),newTabUrl:S+"/overview",external:!0},gallery:{iconName:"__mdi_todo:view_quilt",label:cjBasics.lang.i18n("cj_i18n_01303","Report gallery"),newTabUrl:S+"/gallery",external:!0},connect:{iconName:"__mdi_todo:compare_arrows",label:cjBasics.lang.i18n("cj_i18n_01304","Connect to data"),newTabUrl:S+"/data",external:!0,divider:!0},newfeatures:{iconName:"__mdi_todo:new_releases",label:cjBasics.lang.i18n("cj_i18n_01305","New features"),newTabUrl:i+"6311467"+e,external:!0},tutorials:{iconName:"__mdi_todo:video_youtube",label:cjBasics.lang.i18n("cj_i18n_01306","Video tutorials"),newTabUrl:i+"6390659"+e,external:!0}}):"mymaps"===g?{mymaps:{label:cjBasics.lang.i18n("cj_i18n_00410","My Maps"),iconName:"__mdi_todo:file_map",color:"#ea4335",colorIcon:!0,shortcutId:"167",divider:!0},relatedHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},drive:{label:cjBasics.lang.i18n("cj_i18n_00390","Drive"),iconName:"__mdi_todo:drive",shortcutId:"48"},maps:{label:cjBasics.lang.i18n("cj_i18n_00423","Maps"),iconName:"__mdi_todo:maps",shortcutId:"101"}}:{docs:{label:cjBasics.lang.i18n("cj_i18n_00391","Docs"),iconName:"__mdi_todo:drive_document",color:"#4285f4",colorIcon:!0,shortcutId:"46"},sheets:{label:cjBasics.lang.i18n("cj_i18n_00393","Sheets"),iconName:"__mdi_todo:drive_spreadsheet",color:"#34a853",colorIcon:!0,shortcutId:"128"},slides:{label:cjBasics.lang.i18n("cj_i18n_00407","Slides"),iconName:"__mdi_todo:drive_presentation",color:"#f5a900",colorIcon:!0,shortcutId:"133"},forms:{label:cjBasics.lang.i18n("cj_i18n_00408","Forms"),iconName:"__mdi_todo:drive_form",color:"#673ab7",colorIcon:!0,shortcutId:"57"},drawings:{label:cjBasics.lang.i18n("cj_i18n_00409","Drawings"),iconName:"__mdi_todo:drive_drawing",color:"#ea4335",colorIcon:!0,shortcutId:"47",divider:!0},drive:{label:cjBasics.lang.i18n("cj_i18n_00390","Drive"),iconName:"__mdi_todo:drive",shortcutId:"48"}},onClick:function(e){t.pageManager.navigate(e)},onNewTab:function(e,a){var i=a.newTabUrl;a.shortcutId&&(i=cjgFrontend.urls.getShortcutUrl(a.shortcutId,t.account)),t.openTab(i)}}),h.appendChild(i),(c=B||!g?null:(e=u.newFileLabel||cjBasics.lang.i18n("cj_i18n_00090","New file"),e=cjce.createElement("gmd-fab",{label:e,onClick:V}),"datastudio"===g?[e,k({label:cjBasics.lang.i18n("cj_i18n_06217","New report"),iconName:"__mdi_filled:cj_gmp_data_studio_report",urlPath:"reporting/"}),k({label:cjBasics.lang.i18n("cj_i18n_06218","New data source"),iconName:"__mdi_filled:cj_gmp_data_studio_source",urlPath:"datasources/create"}),k({label:cjBasics.lang.i18n("cj_i18n_06219","New explorer"),iconName:"__mdi_filled:cj_gmp_data_studio_explore",urlPath:"explorer/temp"})]:(a=[e],u.additionalFabs&&u.additionalFabs.forEach(function(e){a.push(cjce.createElement("ccbm-fab",{mini:!0,color:!0,label:e.label,iconName:e.iconName,onClick:function(){e.onClick(t)}}))}),u.hasTemplates&&a.push(cjce.createElement("ccbm-fab",{mini:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_06216","From template"),iconName:"__mdi_todo:category",onClick:z})),a)))&&0<c.length?(c=cjce.createElement("ccbm-fabgroup",{items:c}),n.appendChild(c)):v=!0,d=p+"thumbs",_=p+"filter",m=p+"order",cjBasics.getUnifiedStorageObject([d,_,m]).then(function(e){var a,i,c=e[d],c=("boolean"==typeof c&&(f=!c),e[_]),c=("string"==typeof c&&(y=c),e[m]);function n(e){f=!f,a.hidden=f,i.hidden=!f,M(),cjBasics.setUnifiedStorageItem(p+"thumbs",!f)}"string"==typeof c&&(T=c),e=cjce.createElement("cjmd-appbar",{secondary:!0}),c=cjce.createElement("ccbm-tabs",{items:{all:cjBasics.lang.i18n("cj_i18n_00107","All"),owned:cjBasics.lang.i18n("cj_i18n_00108","Owned by me"),shared:cjBasics.lang.i18n("cj_i18n_00002","Shared with me")},onChange:function(e){y=e,cjBasics.setUnifiedStorageItem(p+"filter",e),M()},selectedId:y}),e.appendChild(c),l=cjce.createElement("ccbm-iconbuttonmenu",{open:"end",label:cjBasics.lang.i18n("cj_i18n_00096","Order by"),iconName:"__mdi_gm:cj_sort_by_alpha",items:{name:cjBasics.lang.i18n("cj_i18n_01990","Name"),lastModified:cjBasics.lang.i18n("cj_i18n_00093","Last modified"),lastModifiedByMe:cjBasics.lang.i18n("cj_i18n_00094","Last modified by me"),lastOpenedByMe:cjBasics.lang.i18n("cj_i18n_00095","Last opened by me")},selectedId:T,isSelector:!0,onChange:function(e){T=e,M(),cjBasics.setUnifiedStorageItem("bm_pref__drive__order",e)}}),e.appendChild(l),u.noViewToggle||((a=cjce.createElement("ccbm-iconbutton",{label:cjBasics.lang.i18n("cj_i18n_00106","Change view"),iconName:"__mdi_gm:view_list",onClick:n})).hidden=f,e.appendChild(a),(i=cjce.createElement("ccbm-iconbutton",{label:cjBasics.lang.i18n("cj_i18n_00106","Change view"),iconName:"__mdi_gm:view_module",onClick:n})).hidden=!f,e.appendChild(i)),r=e,s.appendChild(r),M()}),w.then(function(c){C||setTimeout(function(){var e,a,i;e=c,s.cjceSetLoading(!1),cjgApis.cache.remove(t.account,["bm_cache_v36__"+g+"__doclist__"+y]),r&&r.remove(),a=cjce.createElement("cjmd-container",{shadow:"thin"}),i=cjce.createElement("bm-fulldialog",{inline:!0,lockup:{label:b},iconName:j,message:cjBasics.lang.i18n("cj_i18n_00089","Before you can use this page, you need to give the extension access to Google Drive"),actionLabel:cjBasics.lang.i18n("cj_i18n_01916","Continue with Google"),actionG:!0,action:function(){cjgApis.auth.requestPermissions(t.account,e.cjg_missing_scopes)}}),a.appendChild(i),cjce.replaceChild(n,a,o)})})});