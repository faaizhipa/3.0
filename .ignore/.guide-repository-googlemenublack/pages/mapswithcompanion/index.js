"use strict";function _slicedToArray(e,a){return _arrayWithHoles(e)||_iterableToArrayLimit(e,a)||_unsupportedIterableToArray(e,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,a){var t;if(e)return"string"==typeof e?_arrayLikeToArray(e,a):"Map"===(t="Object"===(t={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,a):void 0}function _arrayLikeToArray(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=Array(a);t<a;t++)n[t]=e[t];return n}function _iterableToArrayLimit(e,a){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,c,o,r,i=[],s=!0,l=!1;try{if(o=(t=t.call(e)).next,0===a){if(Object(t)!==t)return;s=!1}else for(;!(s=(n=o.call(t)).done)&&(i.push(n.value),i.length!==a);s=!0);}catch(e){l=!0,c=e}finally{try{if(!s&&null!=t.return&&(r=t.return(),Object(r)!==r))return}finally{if(l)throw c}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}cjce.registerTemplate("bm-p-mapswithcompanion",function(e,c){var t,n,a,o="https://www.google.com",r=o,i=cjBasics.navigator.contentScriptsOnSearchBlockable,s=(r=i?"https://maps.google.com":r)+"/maps/companion",l="0"===c.account.authuser?null:c.account.authuser,i=cjgFrontend.companion.getInitData(),u=i.id,m=i.hash,p=i.parameters,h=cjBasics.generateUniqueId(),d="",_=cjBasics.lang.i18n("cj_i18n_00061","Explore"),f=["q","Wc"];var b,g=function(){var e,a="bm_cache_v36__mapswithcompanion__functionnames";function t(e){Array.isArray(e)&&e.forEach(function(e,a){var t;"string"==typeof(t=e)&&/^[$A-Za-z]{1,3}$/.test(t)&&(f[a]=e)})}function n(){return e=e||cjgApis.cache.getItem(c.account,a).then(function(e){if(!Array.isArray(e))return cjBasics.getLocalStorageItem(a).then(t);t(e)})}return{set:function(e){n().then(function(){t(e),cjBasics.setLocalStorageItem(a,e),cjgApis.cache.setItem(c.account,a,e)})},restore:n}}();function j(e){t&&t.cjceSendFrameCommand(e,r)}function y(e,a){j({method:"mapswithcompanionUpdateSearchQuery",value:{newValue:e,submit:a}})}function v(e){e=cjBasics.urlParams.attach(o+"/maps/search/",{api:"1",query:e,authuser:"0"!==c.account.authuser?c.account.authuser:null});c.openTab(e)}function w(){var a;t=cjce.createElement("bm-iframe",{src:(a={bm_cid:"mapswithcompanion",bm_iid:h,bm_cst:"2",bm_wiz:"1",bm_wfn:f.join("_"),hl:cjBasics.lang.getCurrent(),authuser:"0"===c.account.authuser?null:c.account.authuser},Object.keys(p).forEach(function(e){a[e]=p[e]}),a.usegapi=null,cjBasics.urlParams.attach(s,a)+m),solid:"#fff",sandbox:"allow-scripts allow-forms allow-same-origin allow-popups",onLoad:function(){n.cjceSetLoading(!1)},onBmMessage:function(e,a){var t;"mapswithcompanionBackState"===e?n.cjceSetBackState(Boolean(a)):"mapswithcompanionNewFunctionNames"===e?g.set(a):"mapswithcompanionPageTitle"===e?n.cjceSetPageLabel(a||_):"bmCstOpenUrl"===e&&(a=(e=_slicedToArray(a,3))[0],t=e[1],e=e[2],a=cjBasics.cleanBmUrl(a),c.openTab(a,t,e))},onMessage:function(e){"string"==typeof e&&e.startsWith("!_{")&&(e=cjgFrontend.companion.handleOpenUrlMessage(e,u,c.account))&&c.openTab(e)}}),e.appendChild(t)}function B(){if(d)return v(d);var e=cjBasics.urlParams.attach(o+"/maps",{authuser:l});c.openTab(e)}function I(e){j({method:"mapswithcompanionToggleFocusState",value:e})}n=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"maps",pageLabel:_,serviceLabel:cjBasics.lang.i18n("cj_i18n_00423","Maps"),searchbox:{onInput:function(e){y(e,!1)},onSubmit:function(e){y(d=e,!0),a.value="",I(!1),n.cjceNavigatorEl.cjceSetCollapseState(!1)},onMetaSubmit:v,onClear:function(){y(d="",!0)},onFocusChanged:I},bmApis:c,onBack:function(){j({method:"mapswithcompanionGoBack"}),a.value="",I(!1),n.cjceSetNavigatorCollapseState(!1)},onNewTab:B}),e.appendChild(n),a=n.cjceSearchboxEl,c.setOnPageDisplayHandler(function(){a.select(),I(!0)}),i=n.cjceDrawerEl,b={home:{iconName:"__mdi_todo:place",label:_,shortcutId:"101"},locationsharing:{label:cjBasics.lang.i18n("cj_i18n_00863","Location sharing"),shortcutId:"590",iconName:"__mdi_todo:record_voice_over",external:!0},places:{label:cjBasics.lang.i18n("cj_i18n_00127","Your places"),shortcutId:"557",iconName:"__mdi_todo:place",external:!0},contributions:{label:cjBasics.lang.i18n("cj_i18n_00128","Your contributions"),shortcutId:"332",iconName:"__mdi_todo:rate_review",external:!0},timeline:{label:cjBasics.lang.i18n("cj_i18n_00129","Your timeline"),shortcutId:"185",iconName:"__mdi_todo:timeline",external:!0},yourdata:{label:cjBasics.lang.i18n("cj_i18n_01780","Your data in Maps"),shortcutId:"912",iconName:"__mdi_todo:cjg_account",external:!0,divider:!0},mymaps:{label:cjBasics.lang.i18n("cj_i18n_00410","My Maps"),shortcutId:"167",iconName:"__mdi_todo:file_map"},earth:{label:cjBasics.lang.i18n("cj_i18n_00471","Earth"),shortcutId:"49",iconName:"__mdi_todo:earth",external:!c.servicesDatabase.earth}},b=cjce.createElement("bm-navlist",{items:b,selectedId:"home",onClick:function(e){"home"!==e&&c.pageManager.navigate(e)},onNewTab:function(e,a){a=a.newTabUrl||cjgFrontend.urls.getShortcutUrl(a.shortcutId,c.account);c.openTab(a)}}),i.appendChild(b),cjBasics.webRequest.handleIframeHeaders([s+"*bm_iid="+h+"*"],{handleFirefoxInject:!0,handleSwCache:!0}),g.restore().then(w)});